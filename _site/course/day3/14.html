<!doctype html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="icon" href="/img/favicon.png" sizes="64x64">
	<title>
	
	
	Files & IO - Learn Dyalog APL
	
	</title>
	<script>
	window.MathJax = {
		tex: {inlineMath: [["@@", "@@"]],displayMath: [["%%","%%"]]},
		svg: {fontCache: 'global'}
	};
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/alerts.css">
	<link rel="stylesheet" href="/css/hints.css">
	<link rel="stylesheet" href="/css/print.css">
</head>
<body>
    <div>	
		<div id="navbar">
    <script>        
        window.onload = function(){
            let p = document.querySelectorAll(".problem");p[0].style.display = "block";
            let b = document.querySelectorAll(".pbutton");b[0].classList.add("active");
            b.forEach(fn=btn=>{
                btn.innerHTML = btn.innerHTML.trim().replace(/^P/, "").replace(/^\d/,"$&:").split("_").join(" ");
            });
            p.forEach(fn=pbm=>{
                let pdiv = document.createElement("div");   
                let pi = document.createElement("input");
                pi.id = pbm.id + "_Input";                             
                let sub = document.createElement("button");
                sub.onclick = function(){
                    submitSolution(pbm.id);
                }
                sub.innerHTML = "Submit";
                let odiv = document.createElement("div")
                odiv.id = pbm.id + "_Output";
                pbm.append(pi);
                pbm.append(sub);
                pbm.append(odiv);
                pbm.append(pdiv);                
            });
            loadTestCases("Files & IO");
        }
        function show(id) {
            let p = document.querySelectorAll(".problem");
            let b = document.querySelectorAll(".pbutton");
            for (let i=0; i<p.length; i++){                
                if (id == p[i].id) {
                    p[i].style.display = "block";
                    b[i].classList.add("active");
                    console.log(b[i]);
                } else {
                    p[i].style.display = "none";
                    b[i].classList.remove("active");
                }
            }
        }
    </script>
	<a id="back" href="/">Home</a>
	<br>
    
    
        
            <br><a href="/psets/2020.html">2020</a>
        
    
        
            <br><a href="/psets/2019.html">2019</a>
        
    
        
            <br><a href="/psets/2018.html">2018</a>
        
    
        
            <br><a href="/psets/2017.html">2017</a>
        
    
    
    
</div>

    </div>
    <div>Some contente efuhskeff</div>
	<div class="course-content">
	<h3 id="hello-world">Hello, World!</h3>
<p>If you have seen any kind of computer programming before, you are probably aware of a quite famous program called “<a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">Hello, World!</a>”.</p>

<p>Here it is in APL:</p>
<pre><code class="language-APL">      ⎕←'Hello, World!'
</code></pre>

<p>If you have learned programming before, maybe it is strange to have gotten so far in an introductory tutorial without meeting the language’s “print” function.</p>

<h3 id="back-2-school-4-maths">Back 2 School 4 Maths</h3>

<p>!!!</p>

<p>multiline dfns</p>

<p>!!!</p>

<p>The function <code class="language-plaintext highlighter-rouge">Test</code> will ask the user <code class="language-plaintext highlighter-rouge">⍵</code> single-digit arithmetic questions, and return the number of correct answers.</p>

<pre><code class="language-APL">      Test←{                                 
         ⍺←0                          
         s←⍎⎕←⍕(?10),('+-×÷'[?4]),?10 
         a←⎕                          
         p←⍺+a≡s                      
         ⍵&gt;1:p ∇ ⍵-1                  
         ⎕←'You scored',p,'points' ⋄ p
      }  
      
      Test 3
</code></pre>

<p>Examine the <code class="language-plaintext highlighter-rouge">Test</code> function and try it out. Which line asks for user input?</p>

<p>You will see that it is quite possible to cheat the <code class="language-plaintext highlighter-rouge">Test</code> function by entering the same expression. To be even more sly, simply move the text cursor with the up arrow to the printed problem statement and press <code class="language-plaintext highlighter-rouge">Enter</code>.</p>

<p>To ameliorate this, we can <em>verify and fix input</em> with <code class="language-plaintext highlighter-rouge">⎕VFI</code>. Also note the use of <em>quote-quad</em> <code class="language-plaintext highlighter-rouge">⍞</code>.</p>

<pre><code class="language-APL">      Test2←{
         ⍺←0
         s←⍎⎕←⍕(?10),('+-×÷'[?4]),?10
         i←⍞
         a←⊃(//⎕VFI)i
         p←⍺+a≡,s
         ⍵&gt;1:p ∇ ⍵-1
         ⎕←'You scored',p,'points' ⋄ p
      }
      
      Test 3
</code></pre>

<p class="alert alert-note">
<span class="alert-symbol">i</span>
<strong>Note:</strong>
By default, non-assignment expressions output results to the session log. We strongly recommend using <code class="language-APL">⎕←</code> when you deliberately intend for an expression to print to the session log. You are then able to search <code class="language-APL">Ctrl+F</code> for print statements.
</p>

<h4 id="system-functions">System Functions</h4>

<p class="alert alert-note">
<span class="alert-symbol">i</span>
<strong>Note:</strong>
This section requires some particular files which can be downloaded from <a href="https://github.com/rikedyp/APLWorkshop">https://github.com/rikedyp/APLWorkshop</a>
</p>

<p>So <code class="language-plaintext highlighter-rouge">⎕</code> and <code class="language-plaintext highlighter-rouge">⍞</code> can be used for input and output. However, there are also the so-called <a href="https://aplwiki.com/wiki/Quad_name"><em>quad-names</em></a> which all have a name beginning with <code class="language-plaintext highlighter-rouge">⎕</code>.</p>

<p>Some quad-names are constants, such as <code class="language-plaintext highlighter-rouge">⎕A</code>, <code class="language-plaintext highlighter-rouge">⎕D</code> and <code class="language-plaintext highlighter-rouge">⎕AV</code>. Others are <a href="http://help.dyalog.com/18.0/#Language/System%20Functions/Summary%20Tables/System%20Functions%20Categorised.htm"><em>system-functions</em></a>, many of which are similar to system command counterparts.</p>

<table>
  <thead>
    <tr>
      <th>System Command</th>
      <th>System Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">)SAVE /path/to/WorkspaceFile</code></td>
      <td><code class="language-plaintext highlighter-rouge">⎕SAVE'/path/to/WorkspaceFile'</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">)LOAD /path/to/WorkspaceFile</code></td>
      <td><code class="language-plaintext highlighter-rouge">⎕LOAD'/path/to/WorkspaceFile'</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">)ERASE name</code></td>
      <td><code class="language-plaintext highlighter-rouge">⎕EX'name'</code></td>
    </tr>
  </tbody>
</table>

<p>In contrast to the system commands, which can only be used in the interactive session, system-functions can be used in a function (A.K.A. <em>under program control</em>).</p>

<h4 id="native-files">Native Files</h4>

<ol>
  <li><code class="language-plaintext highlighter-rouge">'RegionMonthTempStream'</code> is a file of 64-bit floating point values. The stream contains temperature data for <code class="language-plaintext highlighter-rouge">7</code> continents. Each region has <code class="language-plaintext highlighter-rouge">300</code> average monthly temperatures from the years <code class="language-plaintext highlighter-rouge">1995</code> to <code class="language-plaintext highlighter-rouge">1999</code> inclusive.
    <ol>
      <li>Tie the file to the active workspace for reading and writing using <code class="language-plaintext highlighter-rouge">⎕NTIE</code>.
        <pre><code class="language-APL">   tn ← '/path/to/RegionMonthTempStream' ⎕NTIE 0
</code></pre>
      </li>
      <li>Read <a href="http://help.dyalog.com/18.0/#Language/System Functions/nread.htm">the documentation for <code class="language-plaintext highlighter-rouge">⎕NREAD</code></a> and store the data from <code class="language-plaintext highlighter-rouge">'RegionMonthTempStream'</code> into a variable called <code class="language-plaintext highlighter-rouge">tempdata</code>.</li>
      <li>Untie the file so that it is free for other programs to use. Then expunge <code class="language-plaintext highlighter-rouge">tn</code> from the workspace.
        <pre><code class="language-APL">       ⎕NUNTIE tn ⋄ ⎕EX'tn'
</code></pre>
      </li>
    </ol>
  </li>
</ol>

<p>Generally the <code class="language-plaintext highlighter-rouge">⎕N...</code> family of system functions are for reading and writing <em>native files</em> as described in the documentation. <code class="language-plaintext highlighter-rouge">⎕NGET</code> and <code class="language-plaintext highlighter-rouge">⎕NPUT</code> are useful for reading and writing text files without having to tie and untie them.</p>

<pre><code class="language-APL">      (⊂words)⎕NPUT'words.txt'
      words←⊃⎕NGET'words.txt'
</code></pre>

<p>Dyalog has some system functions for dealing with some popular file types. These are <code class="language-plaintext highlighter-rouge">⎕CSV</code>, <code class="language-plaintext highlighter-rouge">⎕XML</code> and <code class="language-plaintext highlighter-rouge">⎕JSON</code>. <code class="language-plaintext highlighter-rouge">⎕XML</code> and <code class="language-plaintext highlighter-rouge">⎕JSON</code> are particularly useful for communicating via the internet and with web browsers.</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">'RegionMonthAvgTemp.csv' is a file of [comma separated values](). It contains the same numeric data as </code>‘RegionMonthTempStream’ but a heading and additional text metadata.</p>

    <ol>
      <li>Load the data into the workspace using <code class="language-plaintext highlighter-rouge">⎕CSV</code>.
        <pre><code class="language-APL">       ⎕←3↑csv←⎕CSV'RegionMonthAvgTemp.csv'
</code></pre>
      </li>
    </ol>
  </li>
</ol>

<h3 id="dyalog-component-files">Dyalog Component Files</h3>

<ol>
  <li>Why would you want to use <code class="language-plaintext highlighter-rouge">)SAVE</code> instead of <code class="language-plaintext highlighter-rouge">⎕SAVE</code>?</li>
</ol>

<h4 id="graphics">Graphics</h4>

	</div>
</body>
</html>
