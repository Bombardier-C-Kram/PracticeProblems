<!doctype html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="icon" href="/img/favicon.png" sizes="64x64">
	<title>
	
	
	Cells and Rank - Learn Dyalog APL
	
	</title>
	<script>
	window.MathJax = {
		tex: {inlineMath: [["@@", "@@"]],displayMath: [["%%","%%"]]},
		svg: {fontCache: 'global'}
	};
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/alerts.css">
	<link rel="stylesheet" href="/css/hints.css">
	<link rel="stylesheet" href="/css/print.css">
</head>
<body>
    <div>	
		<div id="navbar">
    <script>        
        window.onload = function(){
            let p = document.querySelectorAll(".problem");p[0].style.display = "block";
            let b = document.querySelectorAll(".pbutton");b[0].classList.add("active");
            b.forEach(fn=btn=>{
                btn.innerHTML = btn.innerHTML.trim().replace(/^P/, "").replace(/^\d/,"$&:").split("_").join(" ");
            });
            p.forEach(fn=pbm=>{
                let pdiv = document.createElement("div");   
                let pi = document.createElement("input");
                pi.id = pbm.id + "_Input";                             
                let sub = document.createElement("button");
                sub.onclick = function(){
                    submitSolution(pbm.id);
                }
                sub.innerHTML = "Submit";
                let odiv = document.createElement("div")
                odiv.id = pbm.id + "_Output";
                pbm.append(pi);
                pbm.append(sub);
                pbm.append(odiv);
                pbm.append(pdiv);                
            });
            loadTestCases("Cells and Rank");
        }
        function show(id) {
            let p = document.querySelectorAll(".problem");
            let b = document.querySelectorAll(".pbutton");
            for (let i=0; i<p.length; i++){                
                if (id == p[i].id) {
                    p[i].style.display = "block";
                    b[i].classList.add("active");
                    console.log(b[i]);
                } else {
                    p[i].style.display = "none";
                    b[i].classList.remove("active");
                }
            }
        }
    </script>
	<a id="back" href="/">Home</a>
	<br>
    
    
        
            <br><a href="/psets/2020.html">2020</a>
        
    
        
            <br><a href="/psets/2019.html">2019</a>
        
    
        
            <br><a href="/psets/2018.html">2018</a>
        
    
        
            <br><a href="/psets/2017.html">2017</a>
        
    
    
    
</div>

    </div>
    <div>Some contente efuhskeff</div>
	<div class="course-content">
	<h3 id="cells">Cells</h3>

<p>Experiment with the following examples. Describe each one and then describe the behaviour of the rank operator <code class="language-plaintext highlighter-rouge">⍤</code> in terms of <code class="language-plaintext highlighter-rouge">⍺</code> and <code class="language-plaintext highlighter-rouge">⍵</code>. Do not be discouraged by longer expressions and unfamiliar symbols. To help understand, break down the expression and try pieces of it at a time.</p>

<pre><code class="language-APL">      names←↑'Angela' 'Pete' 'Leslie'
      scores←3 6 8
      'Pete  '(=⍤1 1)names
      scores[names⍳'Pete  ']
      (∧/names(=⍤1 1)'Pete  ')⌿scores
      names(∨/⍷⍤1)(⊃⌽⍴names)↑'Pete'
      mass←1 3 5 8 4
      pos←?5 3⍴0
      {(+⌿⍵)÷≢⍵}mass(×⍤0 2)pos
      ×⍤0 2⍨⍳10      
</code></pre>

<div class="tab">
	<input type="checkbox" id="arrayModel" />
	<label class="tab-label" for="arrayModel">&nbsp;Hint:</label>
	<div class="tab-content">
		If you feel stuck, check out <a href="/course/day1/arraymodel">The Array Model</a>.
	</div>
</div>

<h3 id="rank">Rank</h3>

<p>Which of the following functions are affected by the rank operator <code class="language-plaintext highlighter-rouge">⍤</code>, and why are the other functions not affected?</p>

<pre><code class="language-APL">      ⌽    ⍝ Reverse
      ⊖    ⍝ Reverse first
      +/   ⍝ Plus reduce
      +⌿   ⍝ Plus reduce-first
</code></pre>

<h3 id="the-shape-of-the-result">The Shape of the Result</h3>
<p>Without executing them, determine the shape of the results of the following expressions.</p>

<pre><code class="language-APL">      1 3 5∘.!2 4 6 8           
      1 2 3 + 4 5 6             
      {(+⌿⍵)÷≢⍵}3 1 4 1 5       
      +⌿2 3⍴⍳6                  
      ?⌿2 3⍴3/4 52              
      (⌈⌿⍤2)(2 3⍴⍳6)∘.×¯1+?3 4⍴0 
</code></pre>

<div class="tab">
	<input type="checkbox" id="shaperesult" />
	<label class="tab-label" for="shaperesult">&nbsp;Hint:</label>
	<div class="tab-content">
		Of course, you can always check your answers using the shape function <code class="language-APL">⍴</code> 
	</div>
</div>

<h1 id="problems-n-cells--rank">Problems n: Cells &amp; Rank</h1>
<ol>
  <li>
    <pre><code class="language-APL">  a←6↑⎕A      
  a,a
  a⍪a
  alph(⍪⍤2)alph
  1(↑⍤1)alph
  ¯2(↑⍤2)alph
</code></pre>
  </li>
  <li>
    <p>Match the following rank operands with their descriptions. Each use of rank pairs with two of the 10 description boxes below.</p>

    <p><code class="language-plaintext highlighter-rouge">⍤1 3</code></p>

    <pre><code class="language-APL"> ┌────┬────┬───┬─────┬──────┐
 │⍤1 3│⍤2 1│⍤¯1│⍤0 99│⍤99 ¯1│
 └────┴────┴───┴─────┴──────┘

 ┌─┐ ┌────────────────┐ ┌────────────┐
 │⍵│ │major cells of ⍺│ │vectors of ⍺│
 └─┘ └────────────────┘ └────────────┘
 ┌────────────────┐ ┌─┐ ┌──────────────┐
 │major cells of ⍵│ │⍺│ │3D arrays of ⍵│
 └────────────────┘ └─┘ └──────────────┘
 ┌────────────────┐ ┌────────────┐
 │major cells of ⍵│ │scalars of ⍺│
 └────────────────┘ └────────────┘
 ┌────────────────┐ ┌────────────────┐
 │matrices of ⍺   │ │vectors of ⍵    │
 └────────────────┘ └────────────────┘
</code></pre>
  </li>
  <li>
    <p>For each name below, note the rank of arrays with that name.</p>

    <pre><code class="language-APL"> ┌────────┬────────────────────┐
 │Scalar  │                    │
 ├────────┼────────────────────┤
 │Vector  │rank-1 array        │
 ├────────┼────────────────────┤
 │Matrix  │                    │
 ├────────┼────────────────────┤
 │Table   │                    │
 ├────────┼────────────────────┤
 │List    │                    │
 ├────────┼────────────────────┤
 │Cube    │                    │
 ├────────┼────────────────────┤
 │Cuboid  │                    │
 ├────────┼────────────────────┤
 │4D array│                    │
 ├────────┼────────────────────┤
 │2D array│                    │
 └────────┴────────────────────┘
</code></pre>
  </li>
</ol>

<h3 id="some-points-in-space-revisited">Some Points in Space Revisited</h3>

<p>These problems are identical to those about <code class="language-plaintext highlighter-rouge">Some Points in Space</code> in the previous section. This time, create a function which works on vectors and use the rank operator to solve these problems.</p>

<p>The positions of 7 points in 2D space are given by the matrix <code class="language-plaintext highlighter-rouge">pos2←7 2⍴0 1 3 4 2 7 3</code>.</p>

<ol>
  <li>
    <p>Write a function <code class="language-plaintext highlighter-rouge">NormRows</code> to normalise each vector in <code class="language-plaintext highlighter-rouge">pos2</code> so that the sum of squares of each vector is <code class="language-plaintext highlighter-rouge">1</code>.</p>

    <pre><code class="language-APL">       +/pos2*2
 1 25 53 9 10 20 58
       +/((NormVec⍤1)pos2)*2
 1 1 1 1 1 1 1
       ÷/2-/pos2
 ¯1 ¯1 ¯5 3 ¯2 2 4
       ÷/2-/(NormVec⍤1)pos   ⍝ Relative proportions stay the same
 ¯1 ¯1 ¯5 3 ¯2 2 4  
</code></pre>
  </li>
  <li>
    <p>Find the values of <code class="language-plaintext highlighter-rouge">j</code> and <code class="language-plaintext highlighter-rouge">k</code> in each of the expressions below.</p>
    <ol>
      <li>

        <pre><code class="language-APL">       0 10(×⍤j k)pos2
 0 10
 0 40
 0 70
 0  0
 0 30
 0 20
 0 30
</code></pre>
      </li>
      <li>

        <pre><code class="language-APL">       (2×⍳7)(×⍤j k)pos2
  2  3
  7  8
  8 13
 11  8
 11 13
 16 14
 21 17
</code></pre>
      </li>
    </ol>
  </li>
</ol>

<h3 id="rank-matching">Rank Matching</h3>

<pre><code class="language-APL">      'ABC' R1 2 3⍴⍳6
1 A
2 B
3 C
   
4 A
5 B
6 C
</code></pre>

<h3 id="the-shape-of-the-result-1">The Shape of the Result</h3>

<h3 id="cells-and-axes">Cells and Axes</h3>

<h3 id="rank-and-axis">Rank and Axis</h3>

	</div>
</body>
</html>
