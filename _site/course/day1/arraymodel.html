<!doctype html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="icon" href="/img/favicon.png" sizes="64x64">
	<title>
	
	
	The Array Model
	
	</title>
	<script>
	window.MathJax = {
		tex: {inlineMath: [["@@", "@@"]],displayMath: [["%%","%%"]]},
		svg: {fontCache: 'global'}
	};
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/alerts.css">
	<link rel="stylesheet" href="/css/hints.css">
	<link rel="stylesheet" href="/css/print.css">
</head>
<body>
    <div>	
		<div id="navbar">
    <script>        
        window.onload = function(){
            let p = document.querySelectorAll(".problem");p[0].style.display = "block";
            let b = document.querySelectorAll(".pbutton");b[0].classList.add("active");
            b.forEach(fn=btn=>{
                btn.innerHTML = btn.innerHTML.trim().replace(/^P/, "").replace(/^\d/,"$&:").split("_").join(" ");
            });
            p.forEach(fn=pbm=>{
                let pdiv = document.createElement("div");   
                let pi = document.createElement("input");
                pi.id = pbm.id + "_Input";                             
                let sub = document.createElement("button");
                sub.onclick = function(){
                    submitSolution(pbm.id);
                }
                sub.innerHTML = "Submit";
                let odiv = document.createElement("div")
                odiv.id = pbm.id + "_Output";
                pbm.append(pi);
                pbm.append(sub);
                pbm.append(odiv);
                pbm.append(pdiv);                
            });
            loadTestCases("The Array Model");
        }
        function show(id) {
            let p = document.querySelectorAll(".problem");
            let b = document.querySelectorAll(".pbutton");
            for (let i=0; i<p.length; i++){                
                if (id == p[i].id) {
                    p[i].style.display = "block";
                    b[i].classList.add("active");
                    console.log(b[i]);
                } else {
                    p[i].style.display = "none";
                    b[i].classList.remove("active");
                }
            }
        }
    </script>
	<a id="back" href="/">Home</a>
	<br>
    
    
        
            <br><a href="/psets/2020.html">2020</a>
        
    
        
            <br><a href="/psets/2019.html">2019</a>
        
    
        
            <br><a href="/psets/2018.html">2018</a>
        
    
        
            <br><a href="/psets/2017.html">2017</a>
        
    
    
    
</div>

    </div>
    <div>Some contente efuhskeff</div>
	<div class="course-content">
	<h3 id="cells-and-axes">Cells and Axes</h3>
<p>From the APL Wiki: 
A <a target="_blank" href="https://aplwiki.com/wiki/Cell">cell</a> is a subarray which is formed by selecting a single index along some number of leading axes and the whole of each trailing axis. Cells are classified by their rank, which may be between 0 (scalars) and the array’s rank (in which case the cell must be the entire array). Cells with rank k are called k-cells of an array. A major cell is a cell whose rank is one less than the entire array, or a 0-cell of a scalar.</p>

<pre><code class="language-APL">      ⍴cuboid←2 3∘.+3 4 5∘.×4 5 6 7
2 3 4 ← trailing (last) axis
↑
leading (first) axis
</code></pre>

<p>In the array <code class="language-plaintext highlighter-rouge">cuboid</code> defined above, there are <code class="language-plaintext highlighter-rouge">2</code> <strong>major cells</strong>, which are those of rank <code class="language-plaintext highlighter-rouge">¯1+≢⍴cuboid</code>.</p>

<pre><code class="language-APL">      2 3 4⍴⎕A
ABCD
EFGH
IJKL
    
MNOP
QRST
UVWX
      ≢2 3 4⍴⎕A      ⍝ Tally counts the major cells
2
</code></pre>

<p>The dimensions of an array are also known as <strong>axes</strong>. The most major cells, of rank <code class="language-plaintext highlighter-rouge">k-1</code> for an array of rank <code class="language-plaintext highlighter-rouge">k</code>, lie along the <em>first</em> axis. The least major cells are scalars which lie along the <em>last</em> axis to form columns.</p>

<p>Cells of rank</p>

<h3 id="rank-vs-axis">Rank vs. Axis</h3>
<p>We have seen two pairs of <em>first-</em> and <em>last-axis</em> primitives.</p>

<pre><code class="language-APL">      n←2 3⍴1 2 3 1 0 ¯1
      n
1 2  3
1 0 ¯1
      +/n   ⍝ Sum along the last axis
6 0
      +⌿n   ⍝ Sum along the first axis
2 2 2
      7,n   ⍝ Catenate last
7 1 2  3
7 1 0 ¯1
      n⍪7   ⍝ Catenate first
1 2  3
1 0 ¯1
7 7  7
</code></pre>

<pre><code class="language-APL">      '-'⍪2 3⍴'DYALOG'
---
DYA
LOG
      '|',2 3⍴'DYALOG'
|DYA
|LOG
</code></pre>

<p>Some functions and operators can be used along specified axes using the <strong>function axis operator</strong> <code class="language-plaintext highlighter-rouge">[]</code> (more <a target="_blank" href="https://aplwiki.com/wiki/Function-operator_overloading">duplicitous</a> symbols).</p>

<pre><code class="language-APL">      tt←6 4⍴'⎕'
      lt←4 6⍴'⌹'
      lv←6⍴'○'
      sv←4⍴'⍟'
      tt lt lv sv
┌────┬──────┬──────┬────┐
│⎕⎕⎕⎕│⌹⌹⌹⌹⌹⌹│○○○○○○│⍟⍟⍟⍟│
│⎕⎕⎕⎕│⌹⌹⌹⌹⌹⌹│      │    │
│⎕⎕⎕⎕│⌹⌹⌹⌹⌹⌹│      │    │
│⎕⎕⎕⎕│⌹⌹⌹⌹⌹⌹│      │    │
│⎕⎕⎕⎕│      │      │    │
│⎕⎕⎕⎕│      │      │    │
└────┴──────┴──────┴────┘
</code></pre>

<h3 id="nested-arrays">Nested Arrays</h3>
<p>Although you have seen them, we have yet to mention <strong>nested arrays</strong>. They will be discussed in more detail later, but for now you should know arrays with boxed display (when <code class="language-plaintext highlighter-rouge">]boxing</code> is on) are nested arrays. Non-nested arrays are called <strong>simple arrays</strong>.</p>

<pre><code class="language-APL">      2 3⍴'DYALOG'        ⍝ A simple numeric matrix
DYA
LOG
      3⍴'DY' 'AL' 'OG'    ⍝ A nested vector of character vectors
┌──┬──┬──┐
│DY│AL│OG│
└──┴──┴──┘
      2 2⍴⍳4              ⍝ A simple numeric matrix
1 2
3 4
      3⍴(1 2)(3 4)(5 6)   ⍝ A nested vector of numeric vectors
┌───┬───┬───┐
│1 2│3 4│5 6│
└───┴───┴───┘
</code></pre>

<h3 id="primitive-loops">Primitive Loops</h3>
<p>The rank <code class="language-plaintext highlighter-rouge">⍤</code> operator can be used to loop.</p>

<hr />
<p><strong>Nerd Note</strong></p>

<p>While the mental model of rank <code class="language-plaintext highlighter-rouge">⍤</code> is a loop over k-cells, the interpreter can sometimes use vector instructions to do parallel processing.</p>

<hr />

<h1 id="problem-set-6-rank-axes-and-primitive-loops">Problem Set 6: Rank, Axes and Primitive Loops</h1>

	</div>
</body>
</html>
